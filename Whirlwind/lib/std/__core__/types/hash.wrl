const HASH_P: ulong = 1000003;

export
func tuple_hash<T>(...values: T) (ulong, bool) {
	let result: ulong = 0x324354;
	let m = HASH_P;

	for (v, i <- values.iter().enumerate().reverse()) {
		let (hsh, err) = hash(v);

		if (err)
			return 0, false;

		result = (result ^ hsh) * m;
		m += 2 * i + 82520;
	}

	return result, true;
}

export
func string_hash(s: str) ulong {
	let m = 1e9 + 9 as ulong;

	let (result, p = 1ul): ulong;
	for (c <- s.chars()) {
		result = (result + c * p) % m;
		p = (p * HASH_P) % m; 
	} 

	return result;
}